<h1>Images <small>list of all images</small>
  <%= link_to 'New Image', new_image_path, :class => 'btn btn-primary' %>
</h1>

<table class="table">
  <thead>
    <tr>
      <th><%= sort_link @q, :id %></th>
      <th>Thumb</th>
      <th>Info</th>
      <!--<th>Description</th>-->
      <!--<th>Tags</th>-->
      <th><%= sort_link @q, :created_at, "Dates" %></th>
      <!--<th><%= sort_link @q, :published_at %></th>-->
      <th>Flickr</th>
      <th>DeviantArt</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @images.each do |image| %>
      <tr>
        <td>
          <p>
            <%= link_to image.id, edit_image_path(image.id) %>
          </p>
          <p>
            <%= image.album.title %>
            <% if image.album.is_hidden %>
              <span class="label label-important">hidden</span>
            <% end %>
          </p>
        </td>
        <td>
          <%= link_to(edit_image_path(image.id), :class => 'thumbnail span2') do
            image_tag(image.asset.url(:span2))
          end %>
        <td>
          <p>
            <strong><%= image.title %></strong>
            <% if image.title.size < 3 %>
              <span class="label label-important">Not enough!</span>
            <% end %>
          </p>
          <p>
            <%= image.render_data %>
            <% if image.render_data.size < 15 %>
              <span class="label label-important">Not enough!</span>
            <% end %>
          </p>
          <p>
            <%= image.tags_resolved %>
            <% if image.tags_resolved.size < 10 || image.tags_resolved.count(',') < 5 %>
              <span class="label label-important">Not enough!</span>
            <% end %>
          </p>
        </td>
        <td>
          <p>
            <%= image.created_at.strftime("%d/%m/%Y") %>
          </p>
          <p>
            <% if image.published_at.present? %>
              <span class="label label-success"><%= image.published_at.strftime("%d/%m/%Y") %></span>
            <% else %>
              <span class="label label-warning">not published yet</span>
            <% end %>
          </p>
        </td>
        <!--<td>-->
        <!--</td>-->
        <td>
          <% if image.uploaded_to_flickr_at.present? || image.flickr_photo_id.present? %>
            <span class=" "><%= link_to image.flickr_photo_id || 'N/A', "http://www.flickr.com/photos/#{SITE[:flickr_user_id]}/#{image.flickr_photo_id}" %></span>
            <br>
            <span class="label label-success"><%= image.uploaded_to_flickr_at.strftime("%d/%m/%Y") %></span>
          <% else %>
            <span class="label label-warning"><%= link_to 'upload', 'http://www.flickr.com/photos/upload/' %></span>
          <% end%>
        </td>
        <td>
          <% if image.deviantart_id.present? %>
            <span class="label label-important"><%= link_to image.deviantart_id, "http://www.deviantart.com/#/#{image.deviantart_id}" %></span>
          <% else %>
            <span class="label label-warning"><%= link_to 'upload', 'http://www.deviantart.com/submit/deviation' %></span>
          <% end %>
        </td>
        <td>
          <p>
            <%= link_to 'Edit', edit_image_path(image), :class => 'btn btn-primary' %>
          </p>
          <p>
            <%= link_to 'Delete', image_path(image), :class => 'btn', :method => 'delete', :data => { :confirm => 'Delete image?' } %>
          </p>
        </td>
      </tr>
    <% end %>
  </tbody>
  <thead>
    <tr>
      <th><%= sort_link @q, :id %></th>
      <th>Thumb</th>
      <th>Info</th>
      <!--<th>Description</th>-->
      <!--<th>Tags</th>-->
      <th><%= sort_link @q, :created_at, "Dates" %></th>
      <!--<th><%= sort_link @q, :published_at %></th>-->
      <th>Flickr</th>
      <th>DeviantArt</th>
      <th>Actions</th>
    </tr>
  </thead>
</table>

<%= paginate @images %>
